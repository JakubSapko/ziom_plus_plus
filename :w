#include <CLI11.hpp>

int main(int argc, char **argv) {
  CLI::App app{"Welcome to Ziom++, the faster (and probably less beautiful) "
               "version of Ziom CLI!"};

  argv = app.ensure_utf8(argv);

  std::optional<std::string> api_key;
  CLI::Option &cfg_opt =
      *app.add_option("--config", api_key,
                      "An OpenAI API key that will be used to "
                      "generate the commit message")
           ->expected(0, 1)

               try {
    app.parse(argc, argv);
  } catch (const CLI::ParseError &e) {
    return app.exit(e);
  }
  std::cout << &cfg_opt << std::endl;
  std::cout << *api_key << std::endl;
  if (cfg_opt.count() > 0) {
    if (cfg_opt.count() == 1 && api_key.has_value()) {
      std::cout << "API Key provided: " << *api_key << std::endl;
    } else {
      std::cout << "No bitches?" << std::endl;
    }
  }
  return 0;
}
